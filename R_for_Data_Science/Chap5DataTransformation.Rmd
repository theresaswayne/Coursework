---
title: "Notes on R for Data Science Chapter 5: Data transformation"
output: html_notebook
---

*Exercises come from https://r4ds.had.co.nz/transform.html*

*Notes by TCS*

# Setup
First, we load the `tidyverse` package and a dataset. This data frame contains all 336,776 flights that departed from New York City in 2013.

```{r setup}
require(nycflights13)
require(tidyverse)
flights
```

# Basic dplyr functions

There are 5 key functions ("verbs"), plus a helper function, that do most data manipulation tasks in dplyr:  

* `filter`: pick observations by values
* `arrange`: reorder rows  
* `select`: pick variables by name  
* `mutate`: create new variables from existing ones, using functions  
* `summarise`: collapse values into single ones  
* `group_by`: change scope of a verb from the whole dataset to individual groups 

## How verbs work

Input and output are data frames. The input is never modified.    

Arguments consist of  
1. A data frame  
2. "What to do with the data frame"   

## `filter` gives you a subset of rows based on values

Available comparison operators are  >, >=, <, <=, != (not equal), and == (equal).


Wrapping the assignment in parentheses also prints out a preview of the resulting dataframe.



```{r filter examples}
jan1 <- filter(flights, month == 1, day == 1)
jan1

(dec25 <- filter(flights, month == 12, day == 25))
```

For floating-point numbers, instead of relying on ==, use near() to avoid unwanted inequality due to rounding:

```{r near example, echo = TRUE}
sqrt(2) ^ 2 == 2
1 / 49 * 49 == 1
near(sqrt(2) ^ 2,  2)
near(1 / 49 * 49, 1)
```
